<!DOCTYPE html><html lang="pt-BR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Anotações sobre Banco de Dados" /><meta name="author" content="João F. F. Nogueira" /><meta property="og:locale" content="pt_BR" /><meta name="description" content="1 Conceitos Base de Banco de Dados" /><meta property="og:description" content="1 Conceitos Base de Banco de Dados" /><link rel="canonical" href="https://blog.joaonogueira.dev//posts/banco-dados/" /><meta property="og:url" content="https://blog.joaonogueira.dev//posts/banco-dados/" /><meta property="og:site_name" content="Flutter/Dart Blog" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-08-07T08:00:00-03:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Anotações sobre Banco de Dados" /><meta name="twitter:site" content="@joaoffnogueira" /><meta name="twitter:creator" content="@João F. F. Nogueira" /><meta name="google-site-verification" content="G-7RCXJ5XJWN" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"João F. F. Nogueira"},"dateModified":"2022-03-22T20:20:28-03:00","datePublished":"2020-08-07T08:00:00-03:00","description":"1 Conceitos Base de Banco de Dados","headline":"Anotações sobre Banco de Dados","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.joaonogueira.dev//posts/banco-dados/"},"url":"https://blog.joaonogueira.dev//posts/banco-dados/"}</script><title>Anotações sobre Banco de Dados | Flutter/Dart Blog</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Flutter/Dart Blog"><meta name="application-name" content="Flutter/Dart Blog"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src=" https://raw.githubusercontent.com/joaoffnogueira/joaoffnogueira.github.io/main/assets/img/logo.png " alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Flutter/Dart Blog</a></div><div class="site-subtitle font-italic">por João Fernando Ferrari Nogueira - Desenvolvedor Flutter | Android | Windows | Web</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIAS</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARQUIVOS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>SOBRE</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/joaoffnogueira" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/joaoffnogueira" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['dev.joaonogueira','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Anotações sobre Banco de Dados</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Buscar..."> </span> <span id="search-cancel" >Cancelar</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Anotações sobre Banco de Dados</h1><div class="post-meta text-muted"><div> Por <em> João F. F. Nogueira </em></div><div class="d-flex"><div> <span> Postado em <em class="timeago" data-ts="1596798000" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2020-08-07 </em> </span> <span> Atualizado <em class="timeago" data-ts="1647991228" data-toggle="tooltip" data-placement="bottom" data-tooltip-df="llll" > 2022-03-22 </em> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="3035 palavras"> <em>16 min</em> de leitura</span></div></div></div><div class="post-content"><h1 id="1-conceitos-base-de-banco-de-dados">1 Conceitos Base de Banco de Dados</h1><p>Medeiros (2013, p. 15) define “banco de dados (ou, abreviadamente, BD) como sendo um conjunto de dados com certa organização característica, com o objetivo de armazenamento persistente dos dados e dotado de mecanismos de manipulação para obtenção de informações e recuperação posterior, dentro de um sistema de informação”.</p><p>SGBD - Sistema Gerenciador de Banco de Dados</p><h2 id="classificação-dos-bancos-de-dados"><span class="mr-2">Classificação dos Bancos de Dados</span><a href="#classificação-dos-bancos-de-dados" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><ol><li><p>Modelo hierárquico: a busca de um registro deve sempre iniciar pela raiz;</p><li><p>Modelo relacional: dados organizados em tabelas, ou relações;</p><li><p>Modelo orientado a objetos: o modelo de dados de objeto define um banco de dados em termos de objetos, suas propriedades e operações. Os objetos com a mesma estrutura e comportamento pertencem a uma classe, e as classes são organizadas em hierarquias (ou grafos acíclicos). As operações de cada classe são especificadas com procedimentos predefinidos, chamados métodos;</p><li><p>Modelo em rede: semelhante ao hierárquico, mas permite um acesso mais direto aos dados.</p></ol><ul><li><p>Dados à são fatos brutos, em sua forma primária. E muitas vezes os dados podem não fazer sentido sozinhos;</p><li><p>Informações à consistem no agrupamento de dados de forma organizada para fazer sentido, gerar conhecimento.</p></ul><h2 id="sistema-gerenciador-de-banco-de-dados-sgbd"><span class="mr-2">Sistema Gerenciador de Banco de Dados (SGBD)</span><a href="#sistema-gerenciador-de-banco-de-dados-sgbd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Nos SGBDs é definida a estrutura de armazenamento e o mecanismo de manipulação dos dados, garantindo a segurança das informações. Os SGBDs controlam os dados que são armazenados nos bancos de dados.</p><p>Figura 10 – Níveis de abstração em um modelo de dados</p><pre><code class="language-mermaid">graph TD
    A[Esquema Externo 1]
    B[Esquema Externo 2]
    C[Esquema Externo 3]
    A &amp; B &amp; C &lt;--&gt; D[Esquema Conceitual]
    D &lt;--&gt; E[Esquema Físico]
    E &lt;--&gt; F[(Disco)]
</code></pre><p>Esquema conceitual: Descreve a estrutura do banco de dados. Concentra-se na descrição de entidades, tipos de dados, relacionamentos, operações do usuário e restrições. Ex: Alunos(cod_aluno: string, nome: string, login: string, idade: integer)</p><p>O processo de produzir um esquema conceitual é chamado de projeto conceitual de banco de dados.</p><p>Esquema físico: são detalhados os componentes da estrutura física do banco de dados, como Tabelas, Colunas, Tipos e tamanho dos dados e Índices.</p><p>Esquema externo: É a customização do acesso aos dados, no nível dos usuários individuais ou em grupos. Todos os bancos de dados têm apenas um esquema conceitual e um esquema físico, pois há apenas um conjunto de relações armazenadas, mas pode haver diversos esquemas externos, adaptados a grupos de usuários distintos.</p><h2 id="aspectos-de-modelagem-de-dados"><span class="mr-2">Aspectos de Modelagem de Dados</span><a href="#aspectos-de-modelagem-de-dados" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Análise de requisito - Modelo conceitual - Diagrama de entidade-relacionamento (DER)</p><pre><code class="language-mermaid">graph BT
    A[Cliente]
    B{Compra}
    C[Produtos]
    A --- D(código)
    A --- E(nome)
    A --- F(dt_nasc)
    A --- G(idade)
    A --- H(telefone)
    A &amp; C ---|N|B
    C --- I(código)
    C --- J(descrição)
    C --- K(preço)
</code></pre><h1 id="2-modelagem-de-banco-de-dados">2 Modelagem de Banco de Dados</h1><h2 id="modelo-entidade-e-relacionamento"><span class="mr-2">Modelo Entidade e Relacionamento</span><a href="#modelo-entidade-e-relacionamento" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Uma entidade é o objeto básico representado no modelo ER.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/joaoffnogueira/joaoffnogueira.github.io/main/assets/img/posts/2021-07-02-1.png" alt="Entidade" width="100" height="100" data-proofer-ignore></p><p>Os atributos descrevem as características de uma entidade.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/joaoffnogueira/joaoffnogueira.github.io/main/assets/img/posts/2021-07-02-2.png" alt="Atributos" width="100" height="100" data-proofer-ignore></p><p>O relacionamento estabelece uma relação ou associação entre as entidades, com um significado específico do mundo real.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/joaoffnogueira/joaoffnogueira.github.io/main/assets/img/posts/2021-07-02-3.png" alt="Relacionamento" width="100" height="100" data-proofer-ignore></p><div class="table-wrapper"><table><thead><tr><th>Cardinalidade<th>Descrição<tbody><tr><td>1:1<td>Um elemento de uma entidade se relaciona com um elemento de outra entidade<tr><td>1:N ou N:1<td>Um elemento de uma entidade pode se relacionar com mais de um elemento de outra entidade<tr><td>N:N<td>Vários elementos de uma entidade podem se relacionar com vários elementos de outra entidade e vice-versa<tr><td>0:1<td>Um elemento de uma entidade pode se relacionar a nenhuma ou uma ocorrência de outra entidade<tr><td>0:N<td>Um elemento de uma entidade pode se relacionar a nenhuma ou muitas ocorrências de outra entidade</table></div><h2 id="modelos-lógico-físico-e-relacional"><span class="mr-2">Modelos: Lógico, Físico e Relacional</span><a href="#modelos-lógico-físico-e-relacional" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>O modelo lógico de dados reflete as propriedades necessárias para a tradução do modelo conceitual, de maneira que seja possível a descrição dos elementos capazes de serem interpretados por um Sistema Gerenciador de Banco de Dados (SGBD), tais como o detalhamento dos atributos, chaves de acesso, integridade referencial e normalização.</p><p>O modelo físico é a etapa final do projeto de banco de dados, estando relacionado diretamente com o profissional do SGBD, podendo variar conforme o SGBD que está sendo utilizado. Já com a definição do SGBD, o modelo físico é criado e cada atributo é devidamente especificado, conforme os tipos de dados do SGBD escolhido.</p><p>O modelo ER é conveniente para representar um projeto de banco de dados inicial de alto nível. No modelo relacional, as entidades passam a ser tabelas e os atributos passam a ser colunas.</p><div class="table-wrapper"><table><thead><tr><th>Modelo ER<th>Modelo relacional<tbody><tr><td>ENTIDADE<td>TABELA<tr><td>ATRIBUTO SIMPLES<td>COLUNA<tr><td>ATRIBUTO DERIVADO<td>COLUNA<tr><td>ATRIBUTO IDENTIFICADOR<td>CHAVE PRIMÁRIA (OU SECUNDÁRIA)<tr><td>ATRIBUTO MULTIVALORADO<td>NOVA TABELA E CHAVE ESTRANGEIRA<tr><td>RELACIONAMENTO 1:1 OU 1:N<td>CHAVE ESTRANGEIRA<tr><td>RELACIONAMENTO N:N<td>NOVA TABELA COM 2 CHAVES ESTRANGEIRAS<tr><td>CONJUNTO DE VALORES<td>TIPO DE DADOS</table></div><h2 id="as-12-regras-de-codd"><span class="mr-2">As 12 Regras de Codd</span><a href="#as-12-regras-de-codd" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Ao definir o modelo relacional, Codd estabeleceu 12 regras para determinação de um banco de dados relacional.</p><p>Estas regras são usadas, portanto para se verificar a fidelidade de um banco de dados ao modelo relacional. Na prática são poucos os gerenciadores de banco de dados que atendem a todas as 12 regras. Na maior parte dos casos são atendidas no máximo 10 regras.</p><ol><li><p>Toda informação num banco de dados relacional é apresentada a nível lógico na forma de tabelas;</p><li><p>Todo dado em um banco de dados relacional tem a garantia de ser logicamente acessível, recorrendo-se a uma combinação do nome da tabela, um valor de chave e o nome da coluna;</p><li><p>Tratamento sistemático de valores nulos; (ausência de informação)</p><li><p>O dicionário de dados, catálogo, do banco de dados é baseado no modelo relacional;</p><li><p>Há uma linguagem não procedural para a definição, manipulação e controle dos dados;</p><li><p>Tratamento das atualizações de visões dos dados;</p><li><p>Tratamento de alto nível para inserção, atualização e eliminação de dados;</p><li><p>Independência física dos dados; (mudança na memória e no método de acesso, criação de um novo índice, criação de uma nova coluna)</p><li><p>Independência lógica dos dados; (mudança no tamanho de uma coluna)</p><li><p>Restrição de Integridade; (Identidade, Referencial e Domínio)</p><li><p>Independência de Distribuição dos dados;</p><li><p>Não subversão das regras de integridade ou restrições quando se usa uma linguagem hospedeira (Siqueira, S.d.).</p></ol><h1 id="3-linguagem-sql-e-comandos-ddl">3 Linguagem SQL e Comandos DDL</h1><h2 id="structured-query-language"><span class="mr-2">Structured Query Language</span><a href="#structured-query-language" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Em 1982 foi lançada a primeira versão padronizada da linguagem SQL, que veio ganhando melhorias de acordo com sua evolução.</p><p>Em 1986 foi criado um padrão ANSI e, em 1987, foi criado um padrão ISO.</p><p>DDL à Data Definition Language</p><p>Finalidade</p><p>Definição e manutenção das estruturas do banco de dados, tais como a criação do próprio banco de dados e das tabelas que o compõem, além das relações entre as tabelas e os objetos do banco de dados.</p><ul><li>CREATE</ul><p>Criação de estruturas de objetos do banco de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">DATABASE</span> <span class="n">nome_banco</span>

<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">nome_tabela</span> <span class="n">nome_coluna</span> <span class="n">tipoDeDados</span><span class="p">,</span> <span class="n">nome_coluna</span> <span class="n">tipoDeDados</span>
</pre></table></code></div></div><p>Após o tipo pode adicionar NOT NULL, tornando o preenchimento daquela coluna obrigatório. O comando PRIMARY KEY(nome_coluna) ao final define qual coluna será a chave primária. Também é possível usar AUTO_INCREMENT.</p><ul><li>ALTER</ul><p>Alteração da estrutura de objetos do banco de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">nome_tabela</span> <span class="o">//</span> <span class="k">RENAME</span> <span class="n">novo_nome</span> <span class="o">//</span> <span class="k">MODIFY</span> <span class="n">novo_nome</span> <span class="n">novo_tipo</span>

<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">nome_tabela</span> <span class="k">ADD</span> <span class="k">COLUMN</span> <span class="n">novo_nome</span> <span class="n">novo_tipo</span>
</pre></table></code></div></div><ul><li>DROP</ul><p>Eliminação das estruturas de objetos do banco de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">nome_tabela</span> <span class="k">DROP</span> <span class="k">COLUMN</span> <span class="n">novo_nome</span> <span class="n">novo_tipo</span>

<span class="k">DROP</span> <span class="k">TABLE</span> <span class="n">nome_tabela</span>

<span class="k">DROP</span> <span class="k">DATABASE</span> <span class="n">nome_banco</span>
</pre></table></code></div></div><ul><li>TRUNCATE</ul><p>Exclusão física de linhas de tabelas.</p><ul><li>RENAME</ul><p>Renomeação de objetos do banco de dados.</p><ul><li>COMMENT</ul><p>Inclusão de comentários aos objetos do banco de dados.</p><ul><li>SHOW</ul><p>Exibe os objetos criados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">SHOW</span> <span class="n">DATABASES</span>
</pre></table></code></div></div><ul><li>USE</ul><p>Marca um banco de dados para que todas as alterações subsequentes sejam feitas apenas nele.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">USE</span> <span class="n">nome_banco</span>
</pre></table></code></div></div><ul><li>DESCRIBE</ul><p>Exibe a estrutura da tabela, com nomes, tipos de dados e tamanhos.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">DESCRIBE</span> <span class="n">nome_tabela</span>
</pre></table></code></div></div><ul><li><p>A coluna que recebe a chave primária não pode ser NULL;</p><li><p>Cada tabela tem apenas uma chave primária;</p><li><p>Tipos de dados mais utilizados para as chaves são INT e VARCHAR;</p><li><p>O valor da chave primária é atribuído no momento que o registro é criado.</p></ul><h1 id="4-comandos-dml">4 Comandos DML</h1><p>DML à Data Manipulation Language</p><p>Finalidade</p><p>Consultas, inserções, exclusões e alterações em um ou mais registros, de uma ou mais tabelas, de maneira simultânea.</p><ul><li>INSERT</ul><p>Inserção de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">nome_tabela</span> <span class="p">(</span><span class="n">coluna1</span><span class="p">,</span> <span class="n">coluna2</span><span class="p">)</span> <span class="k">values</span> <span class="p">(</span><span class="n">valor1</span><span class="p">,</span> <span class="n">valor2</span><span class="p">);</span>
</pre></table></code></div></div><ul><li>UPDATE</ul><p>Alteração de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">UPDATE</span> <span class="n">tabela</span> <span class="k">SET</span> <span class="n">coluna</span><span class="o">=</span><span class="s1">''</span> <span class="k">WHERE</span> <span class="n">condi</span><span class="err">çã</span><span class="n">o</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>DELETE</ul><p>Exclusão de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">tabela</span><span class="p">;</span>

<span class="k">DELETE</span> <span class="k">FROM</span> <span class="n">tabela</span> <span class="k">WHERE</span> <span class="n">condi</span><span class="err">çã</span><span class="n">o</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>SELECT</ul><p>Consulta de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">nome_tabela</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="n">coluna1</span><span class="p">,</span> <span class="n">coluna2</span> <span class="k">FROM</span> <span class="n">nome_tabela</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="n">coluna1</span><span class="p">,</span> <span class="n">coluna2</span> <span class="k">FROM</span> <span class="n">nome_tabela</span> <span class="k">WHERE</span> <span class="n">condi</span><span class="err">çã</span><span class="n">o</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="n">coluna1</span><span class="p">,</span> <span class="n">coluna2</span> <span class="k">FROM</span> <span class="n">nome_tabela</span> <span class="k">WHERE</span> <span class="n">coluna</span> <span class="k">BETWEEN</span> <span class="n">valor1</span> <span class="k">AND</span> <span class="n">valor2</span> <span class="p">;</span>

<span class="k">SELECT</span> <span class="n">coluna1</span><span class="p">,</span> <span class="n">coluna2</span> <span class="k">FROM</span> <span class="n">nome_tabela</span> <span class="k">WHERE</span> <span class="n">coluna</span> <span class="k">LIKE</span> <span class="s1">'%a'</span><span class="p">;</span> <span class="p">(</span><span class="o">%</span> <span class="n">caractere</span> <span class="n">coringa</span><span class="p">)</span> <span class="s1">'a%'</span>

<span class="k">SELECT</span> <span class="n">coluna1</span><span class="p">,</span> <span class="n">coluna2</span> <span class="k">FROM</span> <span class="n">nome_tabela</span> <span class="k">WHERE</span> <span class="n">coluna</span> <span class="k">LIKE</span> <span class="s1">'___'</span><span class="p">;</span> <span class="p">(</span><span class="n">n</span><span class="err">ú</span><span class="n">mero</span> <span class="n">de</span> <span class="n">caracteres</span><span class="p">)</span>

<span class="k">SELECT</span> <span class="n">coluna1</span><span class="p">,</span> <span class="n">coluna2</span> <span class="k">FROM</span> <span class="n">nome_tabela</span> <span class="k">WHERE</span> <span class="n">coluna</span> <span class="k">NOT</span> <span class="k">LIKE</span> <span class="s1">'_a%'</span><span class="p">;</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">nome_tabela</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">coluna</span> <span class="k">ASC</span><span class="p">;</span> <span class="p">(</span><span class="n">ascendente</span><span class="p">)</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">nome_tabela</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">coluna</span> <span class="k">DESC</span><span class="p">;</span> <span class="p">(</span><span class="n">descendente</span><span class="p">)</span> <span class="o">//</span> <span class="o">*</span><span class="n">todas</span> <span class="k">as</span> <span class="n">colunas</span>

<span class="k">SELECT</span> <span class="n">tabela1</span><span class="p">.</span><span class="n">coluna1</span><span class="p">,</span> <span class="n">tabela2</span><span class="p">.</span><span class="n">coluna2</span> <span class="k">FROM</span> <span class="n">tabela1</span> <span class="k">JOIN</span> <span class="n">tabela2</span> <span class="k">ON</span> <span class="n">tabela1</span><span class="p">.</span><span class="n">coluna3</span><span class="o">=</span><span class="n">tabela2</span><span class="p">.</span><span class="n">coluna1</span><span class="p">;</span> <span class="o">//</span> <span class="k">JOIN</span> <span class="n">pode</span> <span class="n">incluir</span> <span class="k">RIGHT</span> <span class="k">JOIN</span><span class="p">,</span> <span class="k">LEFT</span> <span class="k">JOIN</span><span class="p">,</span> <span class="n">LEFTOUTER</span> <span class="k">JOIN</span>

<span class="k">SELECT</span> <span class="n">tabela1</span><span class="p">.</span><span class="n">coluna1</span> <span class="k">AS</span> <span class="s1">'apelido'</span> <span class="o">//</span><span class="n">apelidar</span> <span class="n">colunas</span><span class="p">,</span> <span class="k">alias</span>
</pre></table></code></div></div><ul><li>MERGE</ul><p>Combinação das instruções INSERT, UPDATE e DELETE.</p><ul><li><p>A ordem de escrita das colunas no comando INSERT não precisa ser na ordem que eles aparecem na estrutura da tabela;</p><li><p>Os dados que vão ser inseridos que forem do tipo texto são obrigados a usar aspas simples;</p><li><p>Não é preciso informar todas as colunas da tabela no comando INSERT (somente os definidos como NOT NULL).</p></ul><p>Outra prática para a execução do comando INSERT é omitir o nome das colunas.</p><p>Com a omissão das colunas no comando INSERT, deve-se prestar atenção a dois pontos importantes:</p><ol><li><p>A ordem dos dados é exatamente a ordem em que as colunas estão definidas na tabela;</p><li><p>Todas as colunas da tabela devem estar informadas, ainda que o valor seja nulo.</p></ol><p>O comando INSERT também permite que sejam inseridos vários registros, ao mesmo tempo (aproveitando o mesmo comando INSERT), em uma mesma tabela.</p><p>Operadores condicionais</p><div class="table-wrapper"><table><thead><tr><th>&gt;<th>maior<tbody><tr><td>&gt;=<td>Maior ou igual<tr><td>&lt;<td>menor<tr><td>&lt;=<td>Menor ou igual<tr><td>=<td>igual<tr><td>&lt;&gt;<td>diferente</table></div><p>A cláusula WHERE pode conter mais de uma condição, e para isso utilizam-se os conectores lógicos (AND e/ou OR).</p><p>O UPDATE pode atualizar uma ou várias colunas no mesmo comando, desde que as colunas sejam separadas por vírgulas.</p><p>Também é possível executar um comando UPDATE sem colocar a condição WHERE.</p><ul><li><p>O DELETE não pode ser utilizado para apagar um dado em uma coluna específica.</p><li><p>É utilizado para apagar um ou mais registros, dependendo da cláusula WHERE.</p><li><p>Pode ser utilizado para apagar todos os dados da tabela, bastando para isso não informar condição.</p><p><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3C/svg%3E" data-src="https://raw.githubusercontent.com/joaoffnogueira/joaoffnogueira.github.io/main/assets/img/posts/2021-07-02-4.png" alt="JOIN" width="100" height="100" data-proofer-ignore></p></ul><p>Algumas outras funções podem ser utilizadas com a instrução SELECT permitindo enxergar os dados de maneiras mais específicas, ajudando na tomada de decisão:</p><p>AVG(coluna) média</p><p>SUM(coluna) soma</p><p>MAX(coluna) máximo</p><p>MIN(coluna) mínimo</p><p>GROUP BY valor</p><p>SELECT COUNT(*) as ‘apelido’ FROM coluna</p><p>LIMIT 3 à retorna os 3 primeiros registros (número máximo);</p><p>LIMIT 10, 3 à retorna 3 registros após o 10º registro (11, 12 e 13 registros).</p><h1 id="5-comandos-dcl-e-tcl---join-de-tabelas">5 Comandos DCL e TCL - Join de Tabelas</h1><p>DCL à Data Control Language</p><p>Finalidade</p><p>Controle de privilégios de usuários, de forma que o administrador do banco de dados possa determinar o nível de acesso de um usuário aos objetos do banco de dados, concedendo privilégios ou retirando esse acesso e revogando os privilégios.</p><ul><li>CREATE USER</ul><p>Criar usuário.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">USER</span> <span class="s1">'novo_usuario'</span> <span class="n">IDENTIFIED</span> <span class="k">BY</span> <span class="s1">'senha'</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>GRANT</ul><p>Atribuição de privilégios aos usuários do banco de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">GRANT</span> <span class="o">*</span><span class="n">direitos</span> <span class="k">ON</span> <span class="o">*</span><span class="n">destino</span> <span class="k">TO</span> <span class="n">usu</span><span class="err">á</span><span class="n">rio</span>
<span class="o">//</span> <span class="o">*</span><span class="n">direitos</span><span class="p">:</span> <span class="k">ALL</span> <span class="k">PRIVILEGES</span><span class="p">,</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">INSERT</span><span class="p">,</span> <span class="k">UPDATE</span><span class="p">,</span> <span class="k">DELETE</span><span class="p">,</span> <span class="k">CREATE</span><span class="p">,</span> <span class="k">DROP</span><span class="p">.</span>
<span class="o">//</span> <span class="o">*</span><span class="n">destinos</span><span class="p">:</span> <span class="n">nomeDaTabela</span><span class="p">,</span> <span class="o">*</span><span class="p">.</span><span class="o">*</span> <span class="k">global</span><span class="p">,</span> <span class="n">db</span><span class="p">.</span><span class="o">*</span> <span class="n">qualquer</span> <span class="n">tabela</span><span class="p">,</span> <span class="n">db</span><span class="p">.</span><span class="n">tb</span> <span class="n">apenas</span> <span class="n">a</span> <span class="n">tabela</span> <span class="n">tb</span> <span class="k">do</span> <span class="n">banco</span> <span class="n">db</span>
</pre></table></code></div></div><ul><li>REVOKE</ul><p>Revogação de privilégios aos usuários do banco de dados.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">REVOKE</span> <span class="o">*</span><span class="n">direitos</span> <span class="k">ON</span> <span class="o">*</span><span class="n">destino</span> <span class="k">FROM</span> <span class="n">usu</span><span class="err">á</span><span class="n">rio</span>
</pre></table></code></div></div><ul><li>DROP USER</ul><p>Remove usuário.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="k">DROP</span> <span class="k">USER</span> <span class="s1">'novo_usuario'</span>
</pre></table></code></div></div><p>TCL à Transact Control Language</p><p>Uma transação primeiramente é realizada primeira em memória e só são transmitidas fisicamente para o banco de dados após a confirmação de que todas as instruções foram efetuadas com sucesso.</p><p>Finalidade</p><p>Controle de transações, consideradas o conjunto de uma ou mais operações DML realizadas no banco de dados.</p><ul><li>BEGIN</ul><p>Indica o início de uma transação e todos os comandos da transação devem vir abaixo de Begin;</p><ul><li>COMMIT</ul><p>Confirmação das manipulações.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">BEGIN</span> <span class="n">TRANSACTION</span><span class="p">;</span> 
	<span class="k">UPDATE</span> <span class="n">CONTA</span> <span class="n">CORRENTE</span> <span class="k">set</span> <span class="n">saldoConta</span><span class="o">=</span> <span class="n">saldoConta</span> <span class="o">-</span> <span class="o">@</span><span class="n">VaIor</span> <span class="k">where</span> <span class="n">numConta</span> <span class="o">=</span> <span class="o">@</span><span class="n">contaDe</span><span class="p">;</span> 
	<span class="k">UPDATE</span> <span class="n">CONTA</span> <span class="n">CORRENTE</span> <span class="k">set</span> <span class="n">saldoConta</span><span class="o">=</span> <span class="n">saldoConta</span> <span class="o">+</span> <span class="o">@</span><span class="n">Valor</span> <span class="k">where</span> <span class="n">numConta</span> <span class="o">=</span> <span class="o">@</span><span class="n">contaPara</span><span class="p">;</span> 
<span class="k">COMMIT</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>ROLLBACK</ul><p>Desistência das manipulações.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">BEGIN</span> <span class="n">TRANSACTION</span> <span class="s1">'transferencia'</span><span class="p">;</span>
	<span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">uf</span> <span class="k">VALUES</span><span class="p">(</span><span class="s1">'pr'</span><span class="p">),(</span><span class="s1">'sc'</span><span class="p">);</span>
<span class="k">ROLLBACK</span> <span class="n">TRANSACTION</span> <span class="s1">'transferencia'</span><span class="p">;</span>
</pre></table></code></div></div><ul><li>SAVEPOINT</ul><p>Criação de pontos para o controle das transações.</p><h2 id="índices"><span class="mr-2">Índices</span><a href="#índices" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Os índices são criados para facilitar e agilizar as consultas dos registros no banco de dados.</p><ul><li><p>Exame nas tabelas à a consulta percorre todos os registros de todas as páginas e seleciona apenas os que são verdadeiros segundo a cláusula WHERE;</p><li><p>Usando índices à percorre a estrutura da árvore do índice, comparando e extraindo somente os registros que são verdadeiros segundo a cláusula WHERE.</p></ul><p>Como foi visto, os índices são utilizados para melhorar as consultas nos registros, mas é preciso levar em conta que a criação da árvore de índice consome um grande espaço em disco, podendo se tornar um problema se o banco está armazenado em um storage.</p><ul><li><p>Não utilizar colunas que tenham uma grande quantidade de dados duplicados ou que tenham pouca variação, como a coluna sexo.</p><li><p>O SGBD gasta recursos mantendo os índices sempre atualizados e associados.</p></ul><p>CREATE INDEX ‘nome do indice’ ON tabela(coluna, coluna);</p><p>Para um melhor desempenho da criação dos índices, é sugerido criá-los nas seguintes colunas:</p><ul><li><p>Chaves primárias;</p><li><p>Chaves estrangeiras;</p><li><p>Colunas acessadas por intervalos (BETWEEN);</p><li><p>Campos utilizados em GROUP BY ou ORDER BY.</p></ul><h1 id="6-procedimentos-armazenados">6 Procedimentos Armazenados</h1><h2 id="stored-procedures"><span class="mr-2">Stored Procedures</span><a href="#stored-procedures" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Muitas aplicações que acessam um banco de dados executam rotinas de manipulação de dados a partir da linguagem ou ferramenta utilizada para criar as aplicações. Essas rotinas podem utilizar várias instruções SQLs em sequência. Se essa rotina executada possuir muitas consultas e atualizações no banco de dados, ela vai gerar um consumo maior dos recursos da aplicação. Caso a aplicação for web, o problema se torna um pouco maior, pois vai gerar maior tráfego de informações na rede e maiores requisições para o servidor.</p><p>Para tentar amenizar o consumo de recursos pela aplicação, é transferida parte do processamento (programação) para o banco de dados. Essas sub-rotinas que são programadas no banco de dados recebem o nome de stored procedure.</p><p>Pontos positivos:</p><ul><li><p>Simplificação da execução de instruções SQL pela aplicação;</p><li><p>Transferência de parte da responsabilidade de processamento para o servidor.</p><li><p>Facilidade na manutenção, reduzindo a quantidade de alterações na aplicação.</p></ul><p>Pontos negativos:</p><ul><li><p>Necessidade de maior conhecimento da sintaxe do banco de dados para escrita de rotinas em SQL;</p><li><p>As rotinas ficam mais facilmente acessíveis. Alguém que tenha acesso ao banco poderá visualizar e alterar o código.</p></ul><p>Um comando que pode ser utilizado em stored procedures, functions e triggers é o DELIMITER. Ele é utilizado para trocar o caractere de finalização. O mysql tem como delimitador o ; (ponto e vírgula), ou seja, o mysql entende que ali o comando está encerrado e não há necessidade de continuidade.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">PROCEDURE</span> <span class="n">nome_procedure</span> <span class="p">(</span><span class="n">parametros</span><span class="p">)</span>
	<span class="n">declaracoes</span><span class="p">;</span>
<span class="k">CALL</span> <span class="n">nome_procedure</span> <span class="p">(</span><span class="n">parametros</span><span class="p">);</span>
<span class="k">DROP</span> <span class="k">PROCEDURE</span> <span class="n">nome_procedure</span><span class="p">;</span>
</pre></table></code></div></div><p>Os parâmetros são classificados em três modos diferentes: IN, OUT ou INOUT.</p><ul><li><p>IN à é utilizado apenas para recebimento (entrada) de dados e não é utilizado para dar retorno;</p><li><p>OUT à é um parâmetro de saída, não sendo informado um valor fixo (direto), apenas uma variável para o retorno;</p><li><p>INOUT à esse modo de parâmetro pode ser utilizado como entrada ou saída, não podendo ser informado um valor fixo.</p></ul><p>Os procedimentos armazenados não precisam ser escritos em SQL; eles podem ser escritos em qualquer linguagem hospedeira.</p><h2 id="functions"><span class="mr-2">Functions</span><a href="#functions" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>As funções são muito semelhantes aos procedimentos, o que os difere, do ponto de vista estrutural, é a inclusão da cláusula RETURN. Nas funções, existe a obrigatoriedade de um retorno à rotina chamadora, que é feito por meio da cláusula RETURN.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">nome_funcao</span> <span class="p">(</span><span class="n">parametros</span><span class="p">)</span>
<span class="k">RETURNS</span> <span class="n">tipo_dados</span>
<span class="n">codigo_da_funcao</span>
<span class="k">RETURN</span> <span class="n">retorno</span>
<span class="k">SELECT</span> <span class="n">nome_funcao</span> <span class="p">(</span><span class="n">parametros</span><span class="p">)</span>
<span class="k">DROP</span> <span class="k">FUNCTION</span> <span class="n">nome_funcao</span><span class="p">;</span>
</pre></table></code></div></div><h2 id="triggers"><span class="mr-2">Triggers</span><a href="#triggers" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>Algumas ações podem ser disparadas (executadas) em consequência ou resposta de uma ação. Esses disparos podem ser programados na aplicação ou diretamente no banco de dados. A utilização direta no banco de dados chama-se triggers.</p><p>Podem-se definir vários triggers em um banco de dados, mas cada comando pode disparar apenas um trigger.</p><p>Pontos positivos:</p><ul><li><p>Parte do processamento que seria executado na aplicação passa para o banco, poupando recursos da máquina cliente;</p><li><p>Facilita a manutenção, sem que seja necessário alterar o código fonte da aplicação.</p></ul><p>Pontos negativos:</p><ul><li><p>Alguém que tenha acesso não autorizado ao banco de dados poderá visualizar e alterar o processamento realizado pelos gatilhos;</p><li><p>Requer maior conhecimento de manipulação do banco de dados (SQL) para realizar as operações internamente.</p></ul><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">CREATE</span> <span class="k">TRIGGER</span> <span class="n">nome</span> <span class="k">AFTER</span><span class="o">/</span><span class="k">BEFORE</span> <span class="k">INSERT</span><span class="o">/</span><span class="k">UPDATE</span><span class="o">/</span><span class="k">DELETE</span> 
	<span class="k">ON</span> <span class="n">tabela</span> 
	<span class="k">FOR</span> <span class="k">EACH</span> <span class="k">ROW</span> 
	<span class="k">BEGIN</span> 
	<span class="n">Instru</span><span class="err">çõ</span><span class="n">es</span> <span class="k">SQL</span> 
	<span class="k">END</span>
<span class="k">DROP</span> <span class="k">TRIGGER</span> <span class="n">nome</span><span class="p">;</span>
</pre></table></code></div></div><ul><li><p>Não se pode chamar diretamente um TRIGGER com CALL, como se faz com um stored procedures;</p><li><p>Não é permitido iniciar ou finalizar transações em meio à TRIGGERS;</p><li><p>Não se pode criar um TRIGGERS para uma tabela temporária – TEMPORARY TABLE;</p><li><p>TRIGGERS ainda não podem ser implementadas com a intenção de devolver para o usuário ou para uma aplicação mensagens de erros.</p></ul><h2 id="registros-new-e-old"><span class="mr-2">Registros NEW e OLD</span><a href="#registros-new-e-old" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>As palavras NEW e OLD são utilizadas para acessar os registros antes ou depois da execução. Como exemplo pode-se acessar os registros que serão enviados para uma tabela antes (BEFORE) ou depois (AFTER) de um UPDATE.</p><ul><li><p>INSERT: o operador NEW.nome_coluna, nos permite verificar o valor enviado para ser inserido em uma coluna de uma tabela. OLD.nome_coluna não está disponível.</p><li><p>DELETE: o operador OLD.nome_coluna nos permite verificar o valor excluído ou a ser excluído. NEW.nome_coluna não está disponível.</p><li><p>UPDATE: tanto OLD.nome_coluna quanto NEW.nome_coluna estão disponíveis, antes (BEFORE) ou depois (AFTER) da atualização de uma linha.</p></ul><h2 id="estruturas-de-programação"><span class="mr-2">Estruturas de programação</span><a href="#estruturas-de-programação" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></h2><p>É possível que as stored procedures tenham incorporado dentro dos seus procedimentos algumas estruturas de programação como condicionais, laços de repetição, funções etc.</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copiado!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">IF</span> <span class="o">&lt;</span><span class="n">condicao</span><span class="o">&gt;</span> <span class="k">THEN</span> 
 <span class="n">comandos</span> <span class="k">sql</span> <span class="n">caso</span> <span class="n">verdadeiro</span> 
 <span class="k">ELSE</span> 
 <span class="n">comandos</span> <span class="k">sql</span> <span class="n">caso</span> <span class="n">falso</span> 
<span class="k">END</span> <span class="n">IF</span>
<span class="n">WHILE</span> <span class="o">&lt;</span><span class="n">condicao</span><span class="o">&gt;</span> <span class="k">DO</span> 
 <span class="n">comandos</span> <span class="k">sql</span> <span class="n">caso</span> <span class="n">verdadeiro</span> 
<span class="k">END</span> <span class="n">WHILE</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/estudos-faculdade/'>Estudos-faculdade</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/banco-de-dados/" class="post-tag no-text-decoration" >banco-de-dados</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> Esta postagem está licenciada sob <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> pelo autor.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Compartilhar</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Anota%C3%A7%C3%B5es+sobre+Banco+de+Dados+-+Flutter%2FDart+Blog&url=https%3A%2F%2Fblog.joaonogueira.dev%2F%2Fposts%2Fbanco-dados%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Anota%C3%A7%C3%B5es+sobre+Banco+de+Dados+-+Flutter%2FDart+Blog&u=https%3A%2F%2Fblog.joaonogueira.dev%2F%2Fposts%2Fbanco-dados%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.joaonogueira.dev%2F%2Fposts%2Fbanco-dados%2F&text=Anota%C3%A7%C3%B5es+sobre+Banco+de+Dados+-+Flutter%2FDart+Blog" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copie o link" data-title-succeed="Link copiado com sucesso!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Atualizados recentemente</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/arquitetura-android/">A arquitetura Android e componentes de aplicativo</a><li><a href="/posts/fluttererror-erro-ao-carregar-assets/">FlutterError - erro ao carregar assets</a><li><a href="/posts/recupera%C3%A7%C3%A3o-banco-dados-seguran%C3%A7a/">Anotações sobre Recuperação de banco de dados e segurança</a><li><a href="/posts/javascript/">Anotações sobre Javascript</a><li><a href="/posts/fundamentos-sistemas-informacao/">Anotações sobre Fundamentos de Sistemas de Informação</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jakarta/">jakarta</a> <a class="post-tag" href="/tags/gest%C3%A3o/">gestão</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/banco-de-dados/">banco-de-dados</a> <a class="post-tag" href="/tags/seguran%C3%A7a/">segurança</a> <a class="post-tag" href="/tags/css/">css</a> <a class="post-tag" href="/tags/dados/">dados</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Conteúdo</div><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Leia também</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/recupera%C3%A7%C3%A3o-banco-dados-seguran%C3%A7a/"><div class="card-body"> <em class="timeago small" data-ts="1579262400" > 2020-01-17 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Anotações sobre Recuperação de banco de dados e segurança</h3><div class="text-muted small"><p> Estratégias de recuperação: Se houver dano extensivo a uma grande parte do banco de dados devido a uma falha catastrófica, como uma falha de disco, o método de recuperação restaura uma cóp...</p></div></div></a></div><div class="card"> <a href="/posts/sql/"><div class="card-body"> <em class="timeago small" data-ts="1597402800" > 2020-08-14 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Anotações sobre SQL</h3><div class="text-muted small"><p> 1 Introdução a Bancos de Dados Linguagem SQL ANSI - pequena diferença com MySQL Mecanismos de armazenamento de dados. Conjunto de informação com estrutura regular. • Bancos de dados não relacion...</p></div></div></a></div><div class="card"> <a href="/posts/sistemas-gerenciamento-banco-dados/"><div class="card-body"> <em class="timeago small" data-ts="1598007600" > 2020-08-21 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Anotações sobre Sistemas de Gerenciamento de Banco de Dados</h3><div class="text-muted small"><p> Baseado no livro: Sistemas de Gerenciamento de Banco de Dados (Ramakrishnan; Gehrke) 1 Visão Geral sobre Sistemas de Banco de Dados Um banco de dados é uma coleção de dados que, tipicamente, desc...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/ajax/" class="btn btn-outline-primary" prompt="Anterior"><p>Anotações sobre Ajax</p></a> <a href="/posts/sql/" class="btn btn-outline-primary" prompt="Próximo"><p>Anotações sobre SQL</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://twitter.com/joaoffnogueira">João F. F. Nogueira</a>. <span data-toggle="tooltip" data-placement="top" title="Exceto onde indicado de outra forma, as postagens do blog neste site são licenciadas sob a Creative Commons Attribution 4.0 International (CC BY 4.0) License pelo autor.">Alguns direitos reservados.</span></p></div><div class="footer-right"><p class="mb-0"> Feito com <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> usando o tema <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> .</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/jakarta/">jakarta</a> <a class="post-tag" href="/tags/gest%C3%A3o/">gestão</a> <a class="post-tag" href="/tags/web/">web</a> <a class="post-tag" href="/tags/android/">android</a> <a class="post-tag" href="/tags/banco-de-dados/">banco-de-dados</a> <a class="post-tag" href="/tags/seguran%C3%A7a/">segurança</a> <a class="post-tag" href="/tags/css/">css</a> <a class="post-tag" href="/tags/dados/">dados</a> <a class="post-tag" href="/tags/git/">git</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! Nenhum resultado encontrado.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/pt.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-7RCXJ5XJWN"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-7RCXJ5XJWN'); }); </script>
